{# WordPress index.php template - Jinja2 #}
{# Main fallback template that displays content in all cases #}
{# Variables: theme, layout #}
<?php
/**
 * The main template file
 *
 * @package {{ theme.theme_display_name | replace(' ', '_') }}
 */

get_header();
?>

<div class="content-area{% if layout.sidebar_position != 'none' %} has-sidebar{% endif %}">
    <div class="container">
        <div class="content-wrapper">
            <div id="primary" class="content-main">

                <?php if ( have_posts() ) : ?>

                    <?php if ( is_home() && ! is_front_page() ) : ?>
                        <header class="page-header">
                            <h1 class="page-title"><?php single_post_title(); ?></h1>
                        </header>
                    <?php endif; ?>

                    <div class="posts-grid grid grid-{{ layout.footer_columns if layout.footer_columns <= 3 else 3 }}">
                        <?php
                        while ( have_posts() ) :
                            the_post();
                            ?>
                            <article id="post-<?php the_ID(); ?>" <?php post_class( 'post-card' ); ?>>
                                <?php if ( has_post_thumbnail() ) : ?>
                                    <div class="post-thumbnail">
                                        <a href="<?php the_permalink(); ?>">
                                            <?php the_post_thumbnail( 'medium_large' ); ?>
                                        </a>
                                    </div>
                                <?php endif; ?>

                                <div class="post-content">
                                    <header class="entry-header">
                                        <?php the_title( '<h2 class="entry-title"><a href="' . esc_url( get_permalink() ) . '">', '</a></h2>' ); ?>
                                    </header>

                                    <div class="entry-meta">
                                        <span class="posted-on">
                                            <time datetime="<?php echo esc_attr( get_the_date( 'c' ) ); ?>">
                                                <?php echo esc_html( get_the_date() ); ?>
                                            </time>
                                        </span>
                                        <span class="byline">
                                            <?php echo esc_html( get_the_author() ); ?>
                                        </span>
                                    </div>

                                    <div class="entry-excerpt">
                                        <?php the_excerpt(); ?>
                                    </div>

                                    <footer class="entry-footer">
                                        <a href="<?php the_permalink(); ?>" class="read-more btn btn-outline">
                                            <?php esc_html_e( 'Read More', '{{ theme.theme_name }}' ); ?>
                                        </a>
                                    </footer>
                                </div>
                            </article>
                            <?php
                        endwhile;
                        ?>
                    </div>

                    <nav class="posts-navigation">
                        <?php
                        the_posts_pagination(
                            array(
                                'mid_size'  => 2,
                                'prev_text' => '&laquo; ' . esc_html__( 'Previous', '{{ theme.theme_name }}' ),
                                'next_text' => esc_html__( 'Next', '{{ theme.theme_name }}' ) . ' &raquo;',
                            )
                        );
                        ?>
                    </nav>

                <?php else : ?>

                    <article class="no-results not-found">
                        <header class="page-header">
                            <h1 class="page-title"><?php esc_html_e( 'Nothing Found', '{{ theme.theme_name }}' ); ?></h1>
                        </header>

                        <div class="page-content">
                            <?php if ( is_home() && current_user_can( 'publish_posts' ) ) : ?>
                                <p>
                                    <?php
                                    printf(
                                        wp_kses(
                                            /* translators: %s: URL to create a new post */
                                            __( 'Ready to publish your first post? <a href="%s">Get started here</a>.', '{{ theme.theme_name }}' ),
                                            array(
                                                'a' => array( 'href' => array() ),
                                            )
                                        ),
                                        esc_url( admin_url( 'post-new.php' ) )
                                    );
                                    ?>
                                </p>
                            <?php elseif ( is_search() ) : ?>
                                <p><?php esc_html_e( 'Sorry, but nothing matched your search terms. Please try again with different keywords.', '{{ theme.theme_name }}' ); ?></p>
                                <?php get_search_form(); ?>
                            <?php else : ?>
                                <p><?php esc_html_e( 'It seems we can&rsquo;t find what you&rsquo;re looking for. Perhaps searching can help.', '{{ theme.theme_name }}' ); ?></p>
                                <?php get_search_form(); ?>
                            <?php endif; ?>
                        </div>
                    </article>

                <?php endif; ?>

            </div><!-- #primary -->

            {% if layout.sidebar_position != 'none' %}
            <aside id="secondary" class="widget-area sidebar sidebar-{{ layout.sidebar_position }}">
                <?php if ( is_active_sidebar( 'sidebar-1' ) ) : ?>
                    <?php dynamic_sidebar( 'sidebar-1' ); ?>
                <?php else : ?>
                    <div class="widget">
                        <h3 class="widget-title"><?php esc_html_e( 'About', '{{ theme.theme_name }}' ); ?></h3>
                        <p><?php bloginfo( 'description' ); ?></p>
                    </div>
                    <div class="widget">
                        <h3 class="widget-title"><?php esc_html_e( 'Archives', '{{ theme.theme_name }}' ); ?></h3>
                        <ul>
                            <?php wp_get_archives( array( 'type' => 'monthly', 'limit' => 5 ) ); ?>
                        </ul>
                    </div>
                <?php endif; ?>
            </aside><!-- #secondary -->
            {% endif %}

        </div><!-- .content-wrapper -->
    </div><!-- .container -->
</div><!-- .content-area -->

<?php
get_footer();
